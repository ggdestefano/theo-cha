<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChÃ¡ de BebÃª Theo - Lista de Presentes</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            background-color: #4a90e2; /* Fundo azul como no inÃ­cio */
            color: #fff; /* Texto branco pra contraste */
        }
        h1 {
            text-align: center;
            color: #fff; /* TÃ­tulo branco */
        }
        ul {
            list-style: none;
            padding: 0;
        }
        li {
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background: #fff; /* Fundo branco nos itens pra contraste */
            color: #333; /* Texto escuro nos itens */
        }
        input[type="checkbox"] {
            margin-right: 10px;
        }
        .taken {
            text-decoration: line-through;
            color: #999;
            opacity: 0.6;
            background: #ffebee !important;
        }
        .taken input[type="checkbox"] {
            display: none;
        }
        .taken::before {
            content: "âœ… Tomado! ";
            font-weight: bold;
        }
        button {
            background: #fff;
            color: #4a90e2;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            width: 100%;
        }
        button:hover {
            background: #e0e0e0;
        }
        #loading {
            text-align: center;
            color: #fff;
        }
        .form-group {
            margin: 20px 0;
        }
        input[type="text"] {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background: #fff;
            color: #333;
        }
    </style>
    <!-- Script do EmailJS -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <script type="text/javascript">
        emailjs.init("SUA_PUBLIC_KEY"); // Substitua por sua Public Key do EmailJS (pegue no painel)
    </script>
</head>
<body>
    <h1>ChÃ¡ de BebÃª Theo ðŸŽ‰</h1>

    <div class="form-group">
        <input type="text" id="nome" placeholder="Digite seu nome" required>
    </div>

    <p style="color: #fff;">Selecione um ou mais presentes abaixo e envie sua resposta.</p>
    
    <ul id="presentesList">
        <li id="loading">Carregando itens...</li>
    </ul>

    <p style="text-align: center; margin-top: 20px;">
        <button onclick="enviarFormulario()">Enviar Resposta</button>
    </p>

    <script>
        const presentes = [
            'Body Manga Longa (6-9)',
            'Body Manga Curta (6-9)',
            'Kit de lenÃ§os umedecidos',
            'Shampoo e sabonete baby',
            'Conjunto de roupinhas de banho',
            'Escova e pente',
            'Conjunto de potinhos para papinhas',
            'Babador',
            'Manta',
            'Cortador de unhas para bebÃª',
            'MacacÃ£o de dormir',
            'Urso de pelÃºcia',
            'Almofada de amamentaÃ§Ã£o',
            'Pomada para Assadura',
            'Cueiro',
            'Paninho de Boca',
            'Toalha de banho',
            'MijÃ£ozinho',
            'Sapatinhos',
            'Meias',
            'Aspirador Nasal',
            'Naninha',
            'Trocador',
            'Talco',
            'Saboneteira'
        ];

        // FunÃ§Ã£o pra carregar itens "tomados" (simulado por enquanto)
        async function carregarTakenItems() {
            // Simula vazio por agora. Integre com Sheets ou manual depois se quiser
            return new Set([]);
        }

        async function renderizarLista() {
            const taken = await carregarTakenItems();
            const list = document.getElementById('presentesList');
            list.innerHTML = '';

            presentes.forEach(item => {
                const li = document.createElement('li');
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.id = item.replace(/\s+/g, '-').toLowerCase();
                checkbox.name = 'presentes';

                const label = document.createElement('label');
                label.htmlFor = checkbox.id;
                label.textContent = item;

                li.appendChild(checkbox);
                li.appendChild(label);

                if (taken.has(item)) {
                    li.classList.add('taken');
                }

                list.appendChild(li);
            });
        }

        async function enviarFormulario() {
            const nome = document.getElementById('nome').value.trim();
            if (!nome) {
                alert('Por favor, digite seu nome!');
                return;
            }

            const selecionados = Array.from(document.querySelectorAll('input[name="presentes"]:checked'))
                .map(cb => cb.nextElementSibling.textContent);

            if (selecionados.length === 0) {
                alert('Por favor, selecione pelo menos um presente!');
                return;
            }

            try {
                await emailjs.send("service_2jq56gm", "template_007ur9o", {
                    nome: nome,
                    presentes: selecionados.join(', ')
                });
                alert(`Obrigado, ${nome}! Seus presentes (${selecionados.join(', ')}) foram enviados.`);
                document.getElementById('nome').value = '';
                document.querySelectorAll('input[name="presentes"]:checked').forEach(cb => cb.checked = false);
            } catch (error) {
                console.error('Erro ao enviar:', error);
                alert('Erro no envio. Verifique o console ou sua conexÃ£o.');
            }
        }

        renderizarLista();
    </script>
</body>
</html>
